<link rel="import" href="/vendor/polymer/polymer.html">

<dom-module id="cuac-item-list">
    <template>
        <style>
            .list-group.show {
                display: block;
            }

            .list-group.hide {
                display: none;
            }
        </style>
        <ul class$="list-group {{listVisibility}}">
          <template is="dom-repeat" items="{{exhibition.children}}" as="child">
            <li class$="list-group-item exhibition-{{child.type}}">
              <template is="dom-if" if="{{isRoom(child.type)}}">
                <a href="/room/{{child.id}}" class="room-name">{{child.name}}</a>
                <cuac-sidebar-plus-button parent$="{{child}}"></cuac-sidebar-plus-button>
              </template>
              <template is="dom-if" if="{{isScene(child.type)}}">
                <a href="/scene/{{child.id}}" class="scene-name">{{child.name}}</a>
                <cuac-sidebar-plus-button parent$="{{child}}"></cuac-sidebar-plus-button>
              </template>
              <ul class="list-group">
                <template is="dom-repeat" items="{{child.children}}">
                  <li class$="list-group-item exhibition-{{item.type}}">
                    {{item.name}}
                    <cuac-sidebar-plus-button parent$="{{item}}"></cuac-sidebar-plus-button>
                    <ul class="list-group">
                      <template is="dom-repeat" items="{{item.children}}">
                        <li class$="list-group-item exhibition-{{item.type}}">
                          {{item.name}}
                          <cuac-sidebar-plus-button parent$="{{item}}"></cuac-sidebar-plus-button>
                        </li>
                      </template>
                    </ul>
                  </li>
                </template>
              </ul>
            </li>
          </template>
        </ul>
    </template>

    <script>
        Polymer({
            is: 'cuac-item-list',

            properties: {

              exhibition: {
                type: Object
              },

              collapse: {
                type: Boolean,
                value: false,
                observer: 'toogleClass'
              }

            },

            toogleClass: function() {
                if (this.collapse) {
                    this.listVisibility = 'show';
                } else {
                    this.listVisibility = 'hide';
                }
            },

            isRoom: function(type) {
              return type == 'room';
            },

            isScene: function(type) {
              return type == 'scene';
            },

            publishClicked: function() {
                this.fire('started');
            }

        });
    </script>
</dom-module>
