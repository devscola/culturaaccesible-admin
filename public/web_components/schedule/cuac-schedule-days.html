<link rel="import" href="/vendor/polymer/polymer.html">

<dom-module id="cuac-schedule-days">
    <template>
        <div class="form-group">
            <input type="checkbox" class="all-day-checkbox" on-change="checkAllDays" on-click="toggleChecked" data-day="allDays">
                Select All<br>
            <template is="dom-repeat" items={{days}} as="day">
                <input id="checkboxId" type="checkbox" class="day-checkbox " on-change="updateSelectedDays" on-click="toggleChecked"  data-day$="{{day}}" checked$="{{checkDays}}">
                {{day}}<br>
                </input>
            </template>
        </div>
    </template>

    <script>
        Polymer({
            is: 'cuac-schedule-days',

            ready: function() {
                this.week = {
                    monday: { checked: false },
                    tuesday: { checked: false },
                    wednesday: { checked: false },
                    thursday: { checked: false },
                    friday: { checked: false },
                    saturday: { checked: false },
                    sunday: { checked: false },
                };
                this.days = Object.keys(this.week);
                this.updateSelectedDays();
                console.log(this.selectedDays);
            },

            properties: {
                selectedDays: {type: Array},

                checkDays: {type: Boolean, value: false, reflectToAttribute: true},

                unCheckDays: {type: Boolean, value: true, reflectToAttribute: true},

                clear: {type: Boolean, value: false, reflectToAttribute: true, 
                    observer: 'clearCheckedDays'}
            },

            checkAllDays: function() {
                this.checkDays = true;

                this.week = {
                    monday: { checked: true },
                    tuesday: { checked: true },
                    wednesday: { checked: true },
                    thursday: { checked: true },
                    friday: { checked: true },
                    saturday: { checked: true },
                    sunday: { checked: true },
                };

            },

            updateSelectedDays: function() {
                this.selectedDays = this.days.filter(function(day) {
                    return this.week[day].checked === true;
                }.bind(this));
                this.fire('daySelected', this.selectedDays);
            },

            toggleChecked: function(e) {
                var day = e.target.dataset.day;
                if(this.week[day].checked === false){
                    this.week[day].checked = true;
                }else{
                    this.week[day].checked = false;
                }
            },

            clearCheckedDays: function() {
                if  (this.clear) {
                    this.checkDays.value = false;
                    
                     this.week = {
                    monday: { checked: false },
                    tuesday: { checked: false },
                    wednesday: { checked: false },
                    thursday: { checked: false },
                    friday: { checked: false },
                    saturday: { checked: false },
                    sunday: { checked: false },
                };
                    
                }
            }
        });
    </script>
</dom-module>
